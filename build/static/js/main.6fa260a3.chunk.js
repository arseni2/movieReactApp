(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{33:function(e,t,n){},65:function(e,t,n){},87:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),i=n.n(c),a=n(29),o=n.n(a),s=(n(65),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,96)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))}),u=n(28),l=n(53),h=n(3),j=n.n(h),p=n(7),m=n(2),d=n(21),b=n.n(d),f=b.a.create({withCredentials:!0,baseURL:"http://localhost:8000/api-auth/",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});function g(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),r=0;r<n.length;r++){var c=n[r].trim();if(c.substring(0,e.length+1)===e+"="){t=decodeURIComponent(c.substring(e.length+1));break}}return t}var x=function(){return f.get("movie").then((function(e){return e.data})).catch((function(){return Promise.reject("oh, no!")}))},O=function(e,t){var n=new FormData;return n.append("userid",String(e)),n.append("movieid",String(t)),b()({method:"POST",url:"http://localhost:8000/api-auth/moviebin/",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:n}).then((function(e){return e.data}))},v=function(){return f.get("genres").then((function(e){return e.data}))},w=function(){return f.get("moviebin/").then((function(e){return e.data}))},k=function(e){return f.get("movie/".concat(e)).then((function(e){return localStorage.setItem("mid",e.data.mid),e.data.movie}))},y=function(e){return f.get("rating/get/".concat(e),{headers:{"Content-Type":"application / x-www-form-urlencoded"}}).then((function(e){return e.data}))},I=function(e,t){return b()({method:"POST",url:"http://localhost:8000/api-auth/rating",headers:{"Content-Type":"application/json"},data:{star:e,movie:t}}).then((function(e){return e.data}))},N=function(e){return f.get("m?search=".concat(e)).then((function(e){return e.data}))},S=function(e){console.log(e);var t=Object.values(e);if(console.log(t),window.url="moviefilter?",t.length){"".concat(e[Object.keys(e)[0]]);window.url+="".concat(e[Object.keys(e)[0]]).substring(1),console.log(e[Object.keys(e)[0]])}for(var n in e)window.url+=e[n];var r=window.url;return console.log(r),f.get("".concat(r)).then((function(e){return e.data}))},T=function(e,t){return b()({method:"POST",url:"http://localhost:8000/api-auth/reviews",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},data:{text:String(e),movie:Number(t),name:String(localStorage.getItem("name")),user:Number(localStorage.getItem("userId"))}}).then((function(e){return e.data}))},R=function(e){return f.get("reviews/".concat(e)).then((function(e){return e.data}))},F=function(e,t,n,r){var c=g("csrftoken"),i=new FormData;return i.append("userPhotos",r),i.append("password",t),i.append("email",n),i.append("name",e),b()({withCredentials:!0,url:"http://localhost:8000/auth/users/",method:"POST",data:i,headers:{"X-CSRFToken":c}}).then((function(e){return e.data}))},P=function(e,t){var n=g("csrftoken"),r=new FormData;return r.append("password",e),r.append("email",t),b()({withCredentials:!0,url:"http://localhost:8000/auth/jwt/create",method:"POST",data:r,headers:{"X-CSRFToken":n}}).then((function(e){return e.data}))},C=function(){return b()({withCredentials:!0,url:"http://localhost:8000/auth/users/me/",method:"GET",data:localStorage.getItem("name"),headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){return localStorage.setItem("userId",e.data.id),e.data})).catch((function(e){return e}))},M=function(e,t){var n=new FormData;return n.append("movie_id",String(e)),n.append("reviews_id",String(t)),f.delete("delReviews/",{data:n}).then((function(e){return e.data}))},E=function(e){var t=new FormData;return t.append("movie_id",String(e)),f.delete("delMovieBin/",{data:t}).then((function(e){return e.data}))},A={movieBin:[],text:"",movie:[],currentMovie:{},isFetching:!0,genres:[],rating:[],reviews:[],results:[],genresCheck:[],movieId:0,nameReviews:"",textReviews:"",star:0,numberState:0,count:null,name:null},z="LOAD_MOVIE",_="LOAD_CURRENT_MOVIE",L="TOGGLE_FETCHING",B="GENRES",D="RATING",U="TEXT",G="MOVIEBIN",V="CHECKBOX",X="REVIEWS",H="NAME",W="REVIEWSTEXT",q="SETSTAR",J="SETMOVIEID",K="SETNUMBER",Z="SETCOUNT",Y="SETRESULTS",$=function(e){return{type:z,movie:e}},Q=function(e){return{type:L,isFething:e}},ee=function(e){return{type:D,rating:e}},te=function(e){return{type:X,reviews:e}},ne=function(e){return{type:q,star:e}},re=function(e){return{type:J,movieId:e}},ce=function(e){return{type:Z,count:e}},ie=function(e){return{type:Y,results:e}},ae=function(e){return{type:G,movieBin:e}},oe=function(){return function(){var e=Object(p.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x().then((function(e){t($(e)),t(Q(!1))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},se=function(e,t){return function(){var n=Object(p.a)(j.a.mark((function n(r,c){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O(e,t).then((function(e){r(Q(!0)),r(ae(e)),r(Q(!1))}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},ue=function(){return function(){var e=Object(p.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w().then((function(e){t(Q(!0)),t(ae(e)),t(Q(!1))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},le=function(e){return function(){var t=Object(p.a)(j.a.mark((function t(n,r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e).then((function(e){n(Q(!0)),n(ae(e)),n(Q(!1))}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},he=function(){return function(){var e=Object(p.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v().then((function(e){t({type:B,genres:e}),t(Q(!1))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(m.a)(Object(m.a)({},e),{},{movie:t.movie});case G:return Object(m.a)(Object(m.a)({},e),{},{movieBin:t.movieBin});case Y:return Object(m.a)(Object(m.a)({},e),{},{results:t.results});case Z:return Object(m.a)(Object(m.a)({},e),{},{count:t.count});case q:return Object(m.a)(Object(m.a)({},e),{},{star:t.star});case X:return Object(m.a)(Object(m.a)({},e),{},{reviews:t.reviews});case L:return Object(m.a)(Object(m.a)({},e),{},{isFetching:t.isFething});case B:return Object(m.a)(Object(m.a)({},e),{},{genres:t.genres});case _:return Object(m.a)(Object(m.a)({},e),{},{currentMovie:t.currentMovie});case K:return Object(m.a)(Object(m.a)({},e),{},{numberState:t.number});case D:return Object(m.a)(Object(m.a)({},e),{},{rating:t.rating});case J:return Object(m.a)(Object(m.a)({},e),{},{movieId:t.movieId});case W:return Object(m.a)(Object(m.a)({},e),{},{textReviews:t.text});case U:return Object(m.a)(Object(m.a)({},e),{},{text:t.text});case H:return Object(m.a)(Object(m.a)({},e),{},{nameReviews:t.name});case V:return Object(m.a)(Object(m.a)({},e),{},{genresCheck:t.check});default:return e}},pe={isInitilized:!1,eror:!1},me="INITIALZED",de="EROR",be=function(e){return{type:de,eror:e}},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:return Object(m.a)(Object(m.a)({},e),{},{isInitilized:!0});case de:return Object(m.a)(Object(m.a)({},e),{},{eror:!0});default:return e}},ge={isAuthorized:!1,username:"",password:"",email:"",file:"",token:null,tokenRefresh:null,profile:[],userId:null},xe="LOGIN",Oe="TOKEN",ve="PROFILE",we="AUTHORIZED",ke="USERID",ye=function(e,t,n,r){return{type:xe,username:e,password:t,email:n,file:r}},Ie=function(e,t){return{type:Oe,token:e,tokenRefresh:t}},Ne=function(e){return{type:ve,profile:e}},Se=function(e){return{type:we,is:e}},Te=function(){return function(){var e=Object(p.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C().then((function(e){t(Ne(e))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Re=function(){return function(e,t){e(Se(!0))}},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return Object(m.a)(Object(m.a)({},e),{},{username:t.username,password:t.password,email:t.email,file:t.file});case Oe:return Object(m.a)(Object(m.a)({},e),{},{token:t.token,tokenRefresh:t.tokenRefresh});case ve:return Object(m.a)(Object(m.a)({},e),{},{profile:t.profile});case we:return Object(m.a)(Object(m.a)({},e),{},{isAuthorized:t.is});case ke:return Object(m.a)(Object(m.a)({},e),{},{userId:t.userId});default:return e}},Pe=Object(u.c)({homePage:je,authPage:Fe,app:fe}),Ce=Object(u.d)(Pe,Object(u.a)(l.a));window.store=Ce;var Me=Ce,Ee=n(10),Ae=n(6),ze=n(11),_e=n(12),Le=n(14),Be=n(13),De=(n(87),n(32),n(33),n(55)),Ue=n.n(De),Ge=(n(88),function(e){Object(Le.a)(n,e);var t=Object(Be.a)(n);function n(e){return Object(ze.a)(this,n),t.call(this,e)}return Object(_e.a)(n,[{key:"render",value:function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(Ue.a,{slidesPerPage:3,animationSpeed:125,offset:-40,children:Array.from(this.props.movie).map((function(e,t){return Object(r.jsx)("img",{style:{cursor:"grab",userSelect:"none",marginTop:"65px"},height:"450px",src:"http://localhost:8000".concat(e.poster)},t)}))})})}}]),n}(c.Component)),Ve=n(26),Xe=n(43),He=i.a.memo((function(e){var t=e.movie,n=e.movieResults,c=e.movieCount;e.isFetching;return Object(r.jsx)("section",{className:"movielist",children:Object(r.jsx)("div",{className:"container",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)(Ge,{movie:t}),Array.from(t).map((function(e,t){return Object(r.jsx)("div",{style:{marginLeft:"0px"},className:"ml-5",children:Object(r.jsx)(Ee.b,{to:"movie/".concat(e.id),children:Object(r.jsx)("div",{className:"row d-flex position-relative listMovie",style:{marginRight:"0"},children:Object(r.jsx)("div",{className:"col justify-content-center ",children:Object(r.jsxs)("div",{className:"container1",children:[Object(r.jsx)("img",{src:"http://localhost:8000".concat(e.poster),alt:"Avatar",width:"300px",height:"400px",className:"image",style:{marginTop:"10px",marginLeft:"10px",zIndex:1e18}}),Object(r.jsxs)("div",{className:"middle",children:[Object(r.jsx)("div",{className:"text",children:" "}),Object(r.jsx)(Ve.a,{className:"iconPlay",icon:Xe.faPlayCircle})]})]})})})})})})),n?Array.from(n).map((function(e,t){return console.log(e.title),Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{style:{marginLeft:"0px"},className:"ml-5",children:Object(r.jsx)(Ee.b,{to:"movie/".concat(e.id),children:Object(r.jsx)("div",{className:"row d-flex position-relative listMovie",style:{marginRight:"0"},children:Object(r.jsx)("div",{className:"col justify-content-center ",children:Object(r.jsxs)("div",{className:"container1",children:[Object(r.jsx)("img",{src:"".concat(e.poster),alt:"Avatar",width:"300px",height:"400px",className:"image",style:{marginTop:"10px",marginLeft:"10px",zIndex:1e18,marginBottom:"20%"}}),Object(r.jsxs)("div",{className:"middle",children:[Object(r.jsx)("div",{className:"text",children:" "}),Object(r.jsx)(Ve.a,{className:"iconPlay",icon:Xe.faPlayCircle})]})]})})})})})})})):console.log("search not"),0==c&&Object(r.jsx)("strong",{style:{marginBottom:"64.2%",marginLeft:"20%"},children:"\u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]})})})})),We=function(e){Object(Le.a)(n,e);var t=Object(Be.a)(n);function n(){return Object(ze.a)(this,n),t.apply(this,arguments)}return Object(_e.a)(n,[{key:"componentDidMount",value:function(){this.props.getMovie(),localStorage.getItem("token")&&this.props.ISUserThunk()}},{key:"render",value:function(){return Object(r.jsx)(r.Fragment,{children:this.props.isFetching?console.log(""):Object(r.jsx)(He,{movie:this.props.movie,isFetching:this.props.isFetching,currentMovie:this.props.currentMovie,text:this.props.text,movieResults:this.props.results,movieCount:this.props.count})})}}]),n}(i.a.PureComponent),qe=Object(Ae.b)((function(e){return{movie:e.homePage.movie,currentMovie:e.homePage.currentMovie,isFetching:e.homePage.isFetching,text:e.homePage.text,results:e.homePage.results,count:e.homePage.count}}),{getMovie:oe,ISUserThunk:Re})(We),Je=n(24),Ke=i.a.memo((function(){return Object(r.jsxs)("footer",{className:"col-12 d-flex mw-100 position-sticky",style:{marginLeft:"0px",marginTop:"29%",height:"300px",marginRight:"0px",background:"#A99BFF"},children:[Object(r.jsxs)("div",{className:"container-fluid",children:[Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"form col-12",children:Object(r.jsx)("form",{children:Object(r.jsxs)("div",{className:"form-row  ",children:[Object(r.jsx)("div",{className:"col-sm col-md col-lg d-flex form__item",children:Object(r.jsx)("input",{type:"text",className:"form-control",placeholder:"First name"})}),Object(r.jsx)("div",{className:"w-100",children:" "}),Object(r.jsx)("div",{className:"col-sm col-md col-lg d-flex form__item",children:Object(r.jsx)("input",{style:{width:"100%"},type:"text",className:"form-control",placeholder:"Last name"})}),Object(r.jsx)("div",{className:"w-100",children:" "}),Object(r.jsx)("div",{className:"col-sm col-md col-lg d-flex form__item",children:Object(r.jsx)("input",{type:"text",className:"form-control",placeholder:"Email",required:!0})}),Object(r.jsx)("div",{className:"w-100",children:" "}),Object(r.jsx)("div",{className:"col-lg-12",children:Object(r.jsx)("button",{type:"submit",className:"btn btn-primary col-lg form__item",children:"send mail"})})]})})})}),Object(r.jsxs)("div",{className:"icons col-lg",children:[Object(r.jsx)("a",{href:"#",children:Object(r.jsx)(Ve.a,{icon:Je.c})}),Object(r.jsx)("a",{href:"#",children:Object(r.jsx)(Ve.a,{icon:Je.a})}),Object(r.jsx)("a",{href:"#",children:Object(r.jsx)(Ve.a,{icon:Je.b})}),Object(r.jsx)("a",{href:"#",children:Object(r.jsx)(Ve.a,{icon:Je.d})})]})]}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{})]})})),Ze=n(35),Ye=(n(92),n(38));var $e,Qe=i.a.memo((function(e){var t;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"nav col-lg-5 ml-auto ",children:Object(r.jsx)("nav",{children:Object(r.jsx)("ul",{className:"nav__items d-flex justify-content-center ",children:Object(r.jsx)("div",{className:"divse col-lg-12 col-sm-12",children:Object(r.jsx)(Ye.c,{initialValues:{searchText:null},validate:function(){return{}},onSubmit:function(t,n){var r=n.setSubmitting,c=function(e,t){for(var n=0,r=e.length;n<r&&e[n]===t;)++n;for(;r>n&&e[r-1]===t;)--r;return n>0||r<e.length?e.substring(n,r):e}(JSON.stringify(String(t.searchText)),'"');e.searchMovie(c),r(!1)},children:function(n){n.isSubmitting;return Object(r.jsx)(Ye.b,{children:Object(r.jsx)(Ye.a,{type:"text",name:"searchText",onChange:function(n){var r;r=n.target.value,t&&clearTimeout(t),t=setTimeout((function(){e.searchMovie(r)}),300)}})})}})})})})})})}));var et=function(e){return $e=Object(Ae.d)((function(e){return e.authPage.isAuthorized})),console.log(e.isFetching),Object(r.jsx)(r.Fragment,{children:$e?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("textarea",{className:"textarea",name:"text",placeholder:"text",onChange:function(t){e.ReviewsText(t.target.value)},value:String(e.textReviews)})," ",Object(r.jsx)("br",{}),Object(r.jsx)("button",{className:"btn btn-success",onClick:function(){var t;t=e.textReviews,e.setReviews(t,e.pk),e.ReviewsText("")},style:{marginLeft:"230px"},disabled:e.isFetching,type:"submit",children:"Submit"})]}):Object(r.jsx)("p",{children:" authorization "})})},tt=i.a.memo((function(e){if(e.profile)if(e.profile.request)console.log("TOKENA NETY"),console.log(e.profile.code),e.AuthorizedAction(!1);else{var t=localStorage.getItem("token");console.log(t),e.AuthorizedAction(!0)}var n={};return Object(r.jsx)("header",{className:"header ",id:"header",children:Object(r.jsx)("div",{className:"container",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("div",{className:"indexz",children:Object(r.jsxs)("div",{className:"hamburger-menu",children:[Object(r.jsx)("input",{id:"menu__toggle",type:"checkbox"}),Object(r.jsx)("label",{className:"menu__btn",htmlFor:"menu__toggle",children:Object(r.jsx)("span",{children:" "})}),Object(r.jsx)("ul",{className:"menu__box",children:!1===e.isFetching?e.genres.map((function(t,c){return Object(r.jsx)("li",{style:{marginTop:"10px"},children:Object(r.jsx)("label",{htmlFor:t.id,children:Object(r.jsxs)("p",{style:{marginTop:"50px",fontSize:"25px"},className:"menu__item",children:[Object(r.jsx)("input",{onClick:function(r){r.target.checked?(Object.assign(n,Object(Ze.a)({},t.name,r.target.value)),e.check(n),e.FilterMovie(n)):delete n[t.name]},type:"radio",name:"flexRadioDefault",className:"menu__item form-check-input",id:t.id,style:{opacity:0},value:"&genres=".concat(t.id)}),t.name]})})},c)})):Object(r.jsx)("p",{children:" "})})]})}),Object(r.jsx)(Qe,{text:e.text,searchMovie:e.searchMovie,SearchText:e.SearchText}),Object(r.jsx)("div",{className:"col-lg-4",style:{zIndex:1e16},children:e.profile?e.profile.request?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(Ee.b,{to:"/realLogin",children:[" ",Object(r.jsx)(r.Fragment,{children:"login"})," "]}),Object(r.jsxs)(Ee.b,{to:"/login",children:[" ",Object(r.jsx)(r.Fragment,{children:"register"})," "]}),localStorage.removeItem("token")," ",localStorage.removeItem("userId")," ",localStorage.removeItem("name")]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("p",{children:e.profile.name})," ",Object(r.jsx)("img",{width:"60px",height:"60px",src:e.profile.userPhotos}),Object(r.jsx)("button",{onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("tokenRefresh"),localStorage.removeItem("userId"),localStorage.removeItem("name"),e.ProfileThunk()},children:"logout"})]}):Object(r.jsx)(r.Fragment,{})}),$e?Object(r.jsxs)("div",{style:{marginTop:"15px",position:"relative"},children:[" ",Object(r.jsx)(Ee.b,{to:"/followed",children:"followed movie"})," "]}):Object(r.jsx)(r.Fragment,{})]})})})})),nt=function(e){Object(Le.a)(n,e);var t=Object(Be.a)(n);function n(){return Object(ze.a)(this,n),t.apply(this,arguments)}return Object(_e.a)(n,[{key:"componentDidMount",value:function(){this.props.getGenres(),this.props.ProfileThunk()}},{key:"render",value:function(){return Object(r.jsx)(r.Fragment,{children:this.props.isFetching?Object(r.jsx)("p",{children:"loading..."}):Object(r.jsx)(tt,{genres:this.props.genres,isFetching:this.props.isFetching,SearchText:this.props.SearchText,text:this.props.text,searchMovie:this.props.searchMovie,check:this.props.Check,FilterMovie:this.props.FilterMovie,AuthorizedAction:this.props.AuthorizedAction,profile:this.props.profile,ProfileThunk:this.props.ProfileThunk})})}}]),n}(i.a.PureComponent),rt=Object(Ae.b)((function(e){return{genres:e.homePage.genres,isFetching:e.homePage.isFetching,text:e.homePage.text,genresCheck:e.homePage.genresCheck,isAuthorized:e.authPage.isAuthorized,profile:e.authPage.profile}}),{getGenres:he,SearchText:function(e){return{type:U,text:e}},searchMovie:function(e){return function(){var t=Object(p.a)(j.a.mark((function t(n,r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(e).then((function(e){n($(e)),n(Q(!1)),n(ce(e.count)),n(ie(e.results))}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Check:function(e){return{type:V,check:e}},FilterMovie:function(e){return function(){var t=Object(p.a)(j.a.mark((function t(n,r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(e).then((function(e){n($(e)),n(ce(e.count)),n(Q(!1)),n(ie(e.results))}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},SetNumber:function(e){return{type:K,number:e}},AuthorizedAction:Se,ProfileThunk:Te})(nt),ct=(n(93),n(59)),it=n(8),at=n(58),ot=n.n(at);window.userRiviewsId=[];var st=i.a.memo((function(e){var t=Object(Ae.d)((function(e){return e.homePage.movieId})),n=Number(e.currentMovie.id)==Number(localStorage.getItem("mid")),c=Object(Ae.c)(),i=Object(it.g)(),a=Object(Ae.d)((function(e){return e.homePage.movieBin})),o=Object(Ae.d)((function(e){return e.authPage.isAuthorized})),s=e.star;return console.log(s),Object(r.jsx)(r.Fragment,{children:e.isFetching?Object(r.jsx)(r.Fragment,{}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{style:{marginTop:"70px"}}),Object(r.jsx)("img",{style:{paddingLeft:"30px",paddingTop:"20px"},width:"430px",height:"500px",src:"http://localhost:8000".concat(e.currentMovie.poster)}),Object(r.jsxs)("div",{className:"cont",children:[Object(r.jsx)("strong",{children:"title: "}),Object(r.jsx)("p",{children:e.currentMovie.title}),Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:"description: "}),Object(r.jsx)("p",{children:e.currentMovie.description}),Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:"rating: "}),Object(r.jsx)("p",{children:[1,2,3,4,5].map((function(t,n){var c=n+1;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"radio",name:"rating",onClick:function(){console.log(Number(c)),e.setRating(Number(c),e.movieId)}}),Object(r.jsx)(ct.a,{className:"star",color:c<Number(s)+1?"#eac424":"grey",size:20})]})})}))}),Object(r.jsx)("strong",{children:"year: "}),Object(r.jsx)("p",{children:e.currentMovie.year}),Object(r.jsx)("strong",{children:"\u0431\u044e\u0434\u0436\u0435\u0442: "}),Object(r.jsxs)("p",{children:[e.currentMovie.budget,"$"]}),Array.from(a).map((function(t,c){return n=e.currentMovie.id==Number(localStorage.getItem("mid"))&&e.currentMovie.user==Number(localStorage.getItem("userId")),console.log(t),Object(r.jsx)(r.Fragment,{})})),o?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("button",{type:"button",className:ot()("btn ",{"btn-success":0==n,"btn-danger":n}),onClick:Object(p.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=6;break}return t.next=3,c(se(localStorage.getItem("userId"),e.currentMovie.id));case 3:i.push("/followed"),t.next=10;break;case 6:return t.next=8,c(le(String(e.currentMovie.id)));case 8:n=!1,i.push("/followed");case 10:case"end":return t.stop()}}),t)}))),children:Object(r.jsx)("p",{onClick:function(e){},children:n?"delete":"add"})})}):Object(r.jsx)(r.Fragment,{})]}),Object(r.jsx)("h1",{children:"Reviews"}),Object(r.jsx)(et,{isFetching:e.isFetching,setReviews:e.setReviews,pk:e.pk,textReviews:e.textReviews,ReviewsText:e.ReviewsText}),0==e.isFetching?Array.from(e.reviews).map((function(n,c){return Object(r.jsx)("div",{children:Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"actionBox",children:Object(r.jsx)("ul",{className:"commentList",children:Object(r.jsxs)("li",{children:[Object(r.jsx)("div",{className:"commenterImage",children:Object(r.jsx)("img",{className:"avtar",width:"50px",height:"50px",src:"https://www.elmechtechnology.com/sites/all/themes/aganhost/demos/no-avatar.jpg"})}),Object(r.jsxs)("div",{className:"commentText",children:[Object(r.jsx)("strong",{className:"dataId","data-id":n.user,children:n.name})," ",Object(r.jsx)("p",{className:"",style:{wordBreak:"break-all"},children:n.text}),n.user==Number(localStorage.getItem("userId"))?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("button",{onClick:function(){e.deleteReviews(t,n.id)},children:"delete"})}):Object(r.jsx)(r.Fragment,{})]})]})})})})},c)})):Object(r.jsx)("div",{children:"loading..."}),Object(r.jsx)(Ke,{})]})})})),ut=function(e){Object(Le.a)(n,e);var t=Object(Be.a)(n);function n(e){return Object(ze.a)(this,n),t.call(this,e)}return Object(_e.a)(n,[{key:"componentDidMount",value:function(){this.props.getMovieBin(),this.props.getCurrentMovie(Number(this.props.match.params.pk)),this.props.getRating(Number(this.props.match.params.pk)),this.props.getReviews(Number(this.props.match.params.pk))}},{key:"render",value:function(){return Object(r.jsx)(r.Fragment,{children:0==this.props.isFetching?Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(rt,{}),Object(r.jsx)(st,{movie:this.props.movie,isFetching:this.props.isFetching,currentMovie:this.props.currentMovie,getRating:this.props.getRating,rating:this.props.rating,setReviews:this.props.setReviews,reviews:this.props.reviews,pk:this.props.match.params.pk,Name:this.props.Name,Text:this.props.Text,setRating:this.props.setRating,star:this.props.star,movieId:this.props.movieId,isAuthorized:this.props.isAuthorized,userId:this.props.userId,ReviewsText:this.props.ReviewsText,textReviews:this.props.textReviews,deleteReviews:this.props.deleteReviews})]}):console.log("")})}}]),n}(i.a.PureComponent),lt=Object(it.h)(Object(Ae.b)((function(e){return{movie:e.homePage.movie,currentMovie:e.homePage.currentMovie,isFetching:e.homePage.isFetching,genres:e.homePage.genres,rating:e.homePage.rating,reviews:e.homePage.reviews,nameReviews:e.homePage.name,textReviews:e.homePage.textReviews,star:e.homePage.star,movieId:e.homePage.movieId,isAuthorized:e.authPage.isAuthorized,userId:e.authPage.userId}}),{getCurrentMovie:function(e){return function(){var t=Object(p.a)(j.a.mark((function t(n,r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e).then((function(e){n({type:_,currentMovie:e}),n(re(e.id))}));case 2:return t.next=4,y(e).then((function(e){n(ee(e)),n(ne(e)),n(Q(!1))}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},MovieId:re,getGenres:he,getRating:function(e){return function(){var t=Object(p.a)(j.a.mark((function t(n,r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e).then((function(e){n(ne(e)),n(ee(e)),n(Q(!1))}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},getReviews:function(e){return function(){var t=Object(p.a)(j.a.mark((function t(n,r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R(e).then((function(e){n(te(e)),n(Q(!1))}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Reviews:te,setReviews:function(e,t){return function(){var n=Object(p.a)(j.a.mark((function n(r,c){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T(e,t).then((function(e){r(te(e)),r(Q(!1))}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Name:function(e){return{type:H,name:e}},Text:function(e){return{type:"TEXTREVIEWS",text:e}},ReviewsText:function(e){return{type:W,text:e}},setRating:function(e,t){return function(){var n=Object(p.a)(j.a.mark((function n(r,c){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I(e,t).then((function(e){r(ee(e)),r(ne(e)),r(Q(!1))}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},getMovieBin:ue,deleteReviews:function(e,t){return function(){var n=Object(p.a)(j.a.mark((function n(r,c){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,M(e,t).then((function(e){r(te(e)),r(Q(!1))}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}})(ut)),ht=i.a.memo((function(e){console.log(e);var t=Object(it.g)();return Object(r.jsxs)("div",{className:"form-group",children:[Object(r.jsx)("br",{}),Object(r.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(r.jsx)("input",{type:"email",className:"form-control",onChange:function(e){window.email=e.target.value,console.log(window.email)},id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email"}),Object(r.jsx)("br",{}),Object(r.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),Object(r.jsx)("input",{type:"password",className:"form-control",onChange:function(e){window.password=e.target.value,console.log(window.email)},id:"exampleInputPassword1",placeholder:"Password"}),Object(r.jsx)("br",{}),Object(r.jsx)("label",{htmlFor:"exampleInputPassword1",children:"User name"}),Object(r.jsx)("input",{type:"name",className:"form-control",onChange:function(e){window.username=e.target.value,console.log(window.email)},id:"exampleInputPassword1",placeholder:"enter username..."}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"file",onChange:function(e){window.avatar=e.target.files[0]},multiple:!0}),Object(r.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){e.LoginThunk(window.username,window.password,window.email,window.avatar),console.log(e.username),t.goBack()},children:"Submit"})]})})),jt=function(e){Object(Le.a)(n,e);var t=Object(Be.a)(n);function n(e){return Object(ze.a)(this,n),t.call(this,e)}return Object(_e.a)(n,[{key:"render",value:function(){return Object(r.jsx)(ht,{username:this.props.username,email:this.props.email,password:this.props.password,LoginThunk:this.props.LoginThunk,token:this.props.token,tokenRefresh:this.props.tokenRefresh})}}]),n}(i.a.PureComponent),pt=Object(Ae.b)((function(e){return{username:e.authPage.username,email:e.authPage.email,password:e.authPage.password,token:e.authPage.token,tokenRefresh:e.authPage.tokenRefresh}}),{LoginThunk:function(e,t,n,r){return function(){var c=Object(p.a)(j.a.mark((function c(i,a){return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return i(Q(!0)),c.next=3,F(e,t,n,r).then((function(e){i(ye(e.name,t,e.email,e.userPhotos)),localStorage.setItem("name",e.name),localStorage.getItem("token")&&i(be(!1))}));case 3:return c.next=5,P(t,n).then((function(e){i(Ie(e.access,e.refresh)),localStorage.removeItem("token"),localStorage.removeItem("tokenRefresh"),localStorage.setItem("token",e.access),localStorage.setItem("tokenRefresh",e.refresh)}));case 5:return c.next=7,C().then((function(e){i(Ne(e))}));case 7:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}()}})(jt),mt=function(e){var t=Object(Ae.c)();Object(c.useEffect)((function(){t(ue())}),[]);var n=Object(Ae.d)((function(e){return e.homePage.movieBin}));return console.log(n),Object(r.jsx)(r.Fragment,{children:n.map((function(e,t){return Object(r.jsx)("div",{children:Object(r.jsx)(Ee.b,{to:"movie/".concat(e.movieid),children:Object(r.jsx)("img",{src:"http://localhost:8000".concat(e.moviePoster)})})})}))})},dt=i.a.memo((function(e){return Object(r.jsx)("div",{className:"animate__animated animate__fadeIn",children:Object(r.jsxs)(it.d,{children:[Object(r.jsx)(it.b,{exact:!0,path:"/login",component:pt}),Object(r.jsx)(it.b,{exact:!0,path:"/followed",component:mt}),Object(r.jsx)(it.b,{exact:!0,path:"/movie/:pk?",component:lt}),Object(r.jsx)(it.b,{exact:!0,path:"/",render:function(){return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(it.b,{path:"",component:rt}),Object(r.jsx)(it.b,{path:"",component:qe}),Object(r.jsx)(Ke,{})]})}})]})})})),bt=(n(94),i.a.memo((function(e){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{id:"wrapper",children:Object(r.jsx)("div",{className:"profile-main-loader",children:Object(r.jsx)("div",{className:"loader",children:Object(r.jsx)("svg",{className:"circular-loader",viewBox:"25 25 50 50",children:Object(r.jsx)("circle",{className:"loader-path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"#70c542",strokeWidth:"2"})})})})})})}))),ft=i.a.memo((function(e){Object(it.g)();var t=Object(Ae.c)();function n(){return c.apply(this,arguments)}function c(){return(c=Object(p.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(be(!1));case 2:return e.abrupt("return",Object(r.jsx)(it.a,{to:"/"}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{type:"email",onChange:function(e){console.log(e.target.value),window.email=e.target.value},placeholder:"email"})," ",Object(r.jsx)("br",{}),Object(r.jsx)("input",{type:"password",onChange:function(e){console.log(e.target.value),window.password=e.target.value},placeholder:"password"}),Object(r.jsx)("input",{type:"text",onChange:function(e){console.log(e.target.value),window.name=e.target.value},placeholder:"name"}),Object(r.jsx)("button",{type:"submit",onClick:Object(p.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.LoginRealThunk(window.email,window.password,window.name);case 2:return t.next=4,n();case 4:case"end":return t.stop()}}),t)}))),children:Object(r.jsx)(Ee.b,{to:"/",children:"login"})})]})})})),gt=function(e){Object(Le.a)(n,e);var t=Object(Be.a)(n);function n(e){return Object(ze.a)(this,n),t.call(this,e)}return Object(_e.a)(n,[{key:"render",value:function(){return Object(r.jsx)(ft,{LoginRealThunk:this.props.LoginRealThunk,profile:this.props.profile})}}]),n}(i.a.PureComponent),xt=Object(Ae.b)((function(e){return{username:e.authPage.username,email:e.authPage.email,password:e.authPage.password,profile:e.authPage.profile}}),{LoginRealThunk:function(e,t,n){return function(){var n=Object(p.a)(j.a.mark((function n(r,c){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,P(t,e).then((function(e){r(Ie(e.access,e.refresh)),localStorage.removeItem("token"),localStorage.removeItem("tokenRefresh"),localStorage.setItem("token",e.access),localStorage.setItem("tokenRefresh",e.refresh),r(be(!1))}));case 2:return n.next=4,C().then((function(e){localStorage.setItem("name",e.name),r(Ne(e))}));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}})(gt),Ot=function(e){Object(Le.a)(n,e);var t=Object(Be.a)(n);function n(){return Object(ze.a)(this,n),t.apply(this,arguments)}return Object(_e.a)(n,[{key:"componentDidMount",value:function(){if(this.props.initThunk(),this.props.ISUserThunk(),this.props.eror)return Object(r.jsx)(it.a,{to:"/reallogin"})}},{key:"render",value:function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(it.b,{exact:!0,path:"/reallogin",component:xt}),this.props.profile.userPhotos?Object(r.jsx)(dt,{isInitilized:this.props.isInitilized}):this.props.profile.isAxiosError?Object(r.jsx)(it.a,{to:"/reallogin"}):this.props.isInitilized?Object(r.jsx)(dt,{isInitilized:this.props.isInitilized}):Object(r.jsx)(bt,{})]})}}]),n}(i.a.Component),vt=Object(Ae.b)((function(e){return{isInitilized:e.app.isInitilized,isFetching:e.homePage.isFetching,eror:e.app.eror,isAuth:e.authPage.isAuthorized,profile:e.authPage.profile}}),{initThunk:function(){return function(){var e=Object(p.a)(j.a.mark((function e(t,n){var r,c,i,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t(oe),c=t(he),i=t(Te),a=t(Re),Promise.all([r,i,c,a]).then((function(){setTimeout((function(){t({type:me})}),600)})),Promise.reject([i]).then((function(e){}),(function(e){t(be(!0))}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},ISUserThunk:Re})(Ot);o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(Ee.a,{children:Object(r.jsx)(Ae.a,{store:Me,children:Object(r.jsx)(vt,{})})})}),document.getElementById("root")),s()}},[[95,1,2]]]);
//# sourceMappingURL=main.6fa260a3.chunk.js.map